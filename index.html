<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>2D Minecraft i HTML</title>
<style>
  body { margin: 0; overflow: hidden; background: #87CEEB; }
  canvas { display: block; background: #87CEEB; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = 800;
canvas.height = 600;

const TILE_SIZE = 40;
const WORLD_WIDTH = canvas.width / TILE_SIZE;
const WORLD_HEIGHT = canvas.height / TILE_SIZE;

// Skapa världen (0 = tomt, 1 = jord)
const world = [];
for(let x=0; x<WORLD_WIDTH; x++){
  world[x] = [];
  for(let y=0; y<WORLD_HEIGHT; y++){
    if(y >= WORLD_HEIGHT - 2){
      world[x][y] = 1; // jord
    } else {
      world[x][y] = 0; // tomt
    }
  }
}

// Spelarens position
let player = {x: 5, y: 5};

// Rita världen
function drawWorld(){
  for(let x=0; x<WORLD_WIDTH; x++){
    for(let y=0; y<WORLD_HEIGHT; y++){
      if(world[x][y] === 1){
        ctx.fillStyle = "#8B4513"; // brun jord
        ctx.fillRect(x*TILE_SIZE, y*TILE_SIZE, TILE_SIZE, TILE_SIZE);
      }
    }
  }
}

// Rita spelaren
function drawPlayer(){
  ctx.fillStyle = "#00FF00"; // grön
  ctx.fillRect(player.x*TILE_SIZE, player.y*TILE_SIZE, TILE_SIZE, TILE_SIZE);
}

// Hantera tangenter
document.addEventListener("keydown", (e) => {
  if(e.key === "ArrowLeft") player.x = Math.max(0, player.x-1);
  if(e.key === "ArrowRight") player.x = Math.min(WORLD_WIDTH-1, player.x+1);
  if(e.key === "ArrowUp") player.y = Math.max(0, player.y-1);
  if(e.key === "ArrowDown") player.y = Math.min(WORLD_HEIGHT-1, player.y+1);
});

// Hantera musklick för att placera/tar bort block
canvas.addEventListener("mousedown", (e) => {
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;
  const tx = Math.floor(mx / TILE_SIZE);
  const ty = Math.floor(my / TILE_SIZE);

  if(e.button === 0){ // vänsterklick = placera block
    world[tx][ty] = 1;
  } else if(e.button === 2){ // högerklick = ta bort block
    world[tx][ty] = 0;
  }
});

// Förhindra högerklicksmeny
canvas.addEventListener("contextmenu", e => e.preventDefault());

// Spelloop
function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawWorld();
  drawPlayer();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
